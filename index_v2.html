<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–¶–≤–µ—Ç–æ—Ñ–æ—Ä ¬∑ –¢—é–ª—å–ø–∞–Ω—ã ‚Äî –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (v2 —Å –∫–æ–Ω—Ñ–∏–≥–æ–º)</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand-primary:#2BB24C; --brand-accent:#FFD400; --brand-danger:#E53935;
      --border:#e5e7eb;
      --pink-1:#ffe8f2; --pink-2:#fff0f7;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:linear-gradient(to bottom,var(--pink-1),var(--pink-2));
      color:#111;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 16px}
    .top{border-bottom:1px solid var(--border);background:#fff}
    .top-inner{display:flex;gap:8px;align-items:center;justify-content:space-between;padding:8px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .brand-title{font-size:28px;font-weight:800;letter-spacing:.5px;line-height:1}
    .brand-logo{width:32px;height:32px;border-radius:12px;display:grid;place-items:center;color:#fff;font-weight:800;background:linear-gradient(135deg,var(--brand-primary),#4ade80);font-size:18px}
    .city{padding:6px 10px;border-radius:12px;border:1px solid var(--border);background:#fff}
    .links a{padding:6px 10px;border-radius:12px;font-size:12px;color:#6b7280}
    .tabs{position:sticky;top:0;z-index:5;background:rgba(255,255,255,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .tabs-inner{display:flex;align-items:center;gap:8px;justify-content:space-between;padding:10px 0}
    .tab{padding:10px 14px;border:1px solid var(--border);border-radius:14px;background:#fff;font-weight:600;cursor:pointer}
    .tab.active{background:#f3f4f6}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:14px;background:#fff;font-weight:600;cursor:pointer}
    .btn-primary{background:var(--brand-primary);border-color:var(--brand-primary);color:#fff}
    .badge{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:rgba(43,178,76,.08);color:var(--brand-primary);font-size:12px}
    .grid{display:grid;gap:16px}
    .grid-cols{grid-template-columns:1.2fr .8fr}
    .card{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:0 2px 10px rgba(0,0,0,.03)}
    .thumb{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:20px 20px 0 0;display:block}
    .list{display:grid;gap:16px}
    @media(min-width:720px){.list{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1080px){.list{grid-template-columns:repeat(3,1fr)}}
    .price{border:1px solid currentColor;border-radius:999px;font-size:12px;padding:2px 8px}
    .muted{color:#6b7280} .xs{font-size:12px}
    .footer{font-size:12px;color:#6b7280;text-align:center;padding:24px 0}
    .hidden{display:none}
    .input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-size:12px;background:rgba(43,178,76,.08);color:var(--brand-primary)}
  </style>
</head>
<body>
  <!-- üîß CONFIG (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –ø—Ä—è–º–æ –∑–¥–µ—Å—å) -->
  <script>
    /* ==========================
       –ö–û–ù–§–ò–ì –°–ê–ô–¢–ê (v2)
       ‚Äî –ú–µ–Ω—è–π —Ü–≤–µ—Ç–∞, –≥–æ—Ä–æ–¥–∞, –∫–∞—Ç–∞–ª–æ–≥, —Ç–µ–∫—Å—Ç—ã ‚Äî —Å–∞–π—Ç –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å–∞–º.
    ========================== */
    const CONFIG = {
      theme: {
        brandPrimary: "#2BB24C",     // –∑–µ–ª—ë–Ω—ã–π —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π
        gradientFrom: "#ffe8f2",     // –≤–µ—Ä—Ö —Ñ–æ–Ω–∞ (—Ä–æ–∑–æ–≤—ã–π)
        gradientTo:   "#fff0f7",     // –Ω–∏–∑ —Ñ–æ–Ω–∞ (—Ä–æ–∑–æ–≤—ã–π-—Å–≤–µ—Ç–ª—ã–π)
        border: "#e5e7eb"
      },
      brand: {
        title: "–¶–í–ï–¢–û–§–û–†",           // –±–æ–ª—å—à–æ–π —Ç–µ–∫—Å—Ç –≤ —à–∞–ø–∫–µ
        logoEmoji: "üå∑"               // –º–∞–ª–µ–Ω—å–∫–∏–π –ª–æ–≥–æ—Ç–∏–ø —Ä—è–¥–æ–º
      },
      cities: [
        { name:"–£–ª–∞–Ω-–£–¥—ç", phone:"+7 (3012) 50-22-20", address:"—É–ª. –°–º–æ–ª–∏–Ω–∞, 54–ê" },
        { name:"–ò—Ä–∫—É—Ç—Å–∫",  phone:"+7 (3952) 66-33-22", address:"—É–ª. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 23" },
        { name:"–ê–Ω–≥–∞—Ä—Å–∫",  phone:"+7 (3955) 55-55-20", address:"182 –∫–≤–∞—Ä—Ç–∞–ª, 13" },
        { name:"–ß–∏—Ç–∞",     phone:"+7 (3022) 22-20-22", address:"—É–ª. –ê–º—É—Ä—Å–∫–∞—è, 10" }
      ],
      catalog: [
        { id:"red-impression", name:"Red Impression", price:25, stem:"40‚Äì50 —Å–º", desc:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∞–ª—ã–π —Å–æ—Ä—Ç, –∫—Ä—É–ø–Ω—ã–π –±—É—Ç–æ–Ω 7‚Äì8 —Å–º.", color:"#d7263d", img:"https://images.unsplash.com/photo-1468824357306-a439d58ccb1c?q=80&w=1200&auto=format&fit=crop" },
        { id:"strong-gold",    name:"Strong Gold",    price:27, stem:"40‚Äì50 —Å–º", desc:"–ù–∞—Å—ã—â–µ–Ω–Ω–æ-–∂—ë–ª—Ç—ã–π —Å–æ—Ä—Ç —Å –ø—Ä–æ—á–Ω—ã–º —Å—Ç–µ–±–ª–µ–º.",       color:"#f0c419", img:"https://images.unsplash.com/photo-1464965911861-746a04b4bca6?q=80&w=1200&auto=format&fit=crop" },
        { id:"purple-prince",  name:"Purple Prince",  price:28, stem:"40‚Äì50 —Å–º", desc:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Å–æ—Ä—Ç —Å –±–∞—Ä—Ö–∞—Ç–Ω—ã–º–∏ –ª–µ–ø–µ—Å—Ç–∫–∞–º–∏.",        color:"#6a0dad", img:"https://images.unsplash.com/photo-1456763961288-cde5f0a7c3fe?q=80&w=1200&auto=format&fit=crop" },
        { id:"yellow-flight",  name:"Yellow Flight",  price:26, stem:"40‚Äì50 —Å–º", desc:"–°–æ–ª–Ω–µ—á–Ω—ã–π –∂—ë–ª—Ç—ã–π, —Ä–æ–≤–Ω–∞—è —Ü–≤–µ—Ç–Ω–∞—è –ø–ª–∞–Ω—Ç–∞—Ü–∏—è.",     color:"#ffd166", img:"https://images.unsplash.com/photo-1528832636320-3a99f6fb0f58?q=80&w=1200&auto=format&fit=crop" },
        { id:"white-snow",     name:"White Snow",     price:26, stem:"40‚Äì50 —Å–º", desc:"–ß–∏—Å—Ç–æ-–±–µ–ª—ã–µ –±—É—Ç–æ–Ω—ã, –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –Ω–µ–∂–Ω–æ—Å—Ç—å.",         color:"#f7f7f7", img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop" }
      ],
      texts: {
        ribbon: "–í–µ—Å–µ–Ω–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è ‚Ä¢ –ø—Ä–µ–¥–∑–∞–∫–∞–∑",
        heroTitle: "–¢—é–ª—å–ø–∞–Ω—ã –æ–ø—Ç–æ–º: –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ä—Ç, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É",
        heroSubtitle: "–ö—Ä—É–ø–Ω—ã–µ –±—É—Ç–æ–Ω—ã, —Ä–æ–≤–Ω–∞—è –¥–ª–∏–Ω–∞, –±–µ—Ä–µ–∂–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞. –î–æ—Å—Ç—É–ø–Ω—ã —É–ø–∞–∫–æ–≤–∫–∏ √ó50/√ó100/√ó200.",
        quickOrder: "–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑",
        btnAdd: "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É",
        btnGoCheckout: "–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é",
        checkoutTitle: "–ö–æ—Ä–∑–∏–Ω–∞",
        contactTitle: "–î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏",
        successTitle: "–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!",
        successNumber: "–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:",
        adminTitle: "–ê–¥–º–∏–Ω ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∞–º–∏",
        adminNote: "–í–∫–ª/–≤—ã–∫–ª –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –ø—Ä–∞–≤–∫–∞ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã, –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å."
      }
    };
  </script>

  <!-- Top bar -->
  <div class="top">
    <div class="container top-inner">
      <div class="brand">
        <div class="brand-title" id="brandTitle">–¶–í–ï–¢–û–§–û–†</div>
        <div class="brand-logo" id="brandLogo" title="–õ–æ–≥–æ—Ç–∏–ø">üå∑</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <select class="city" id="city"></select>
        <nav class="links">
          <a href="#">–ö–∞—Ç–∞–ª–æ–≥</a>
          <a href="#">–û –Ω–∞—Å</a>
          <a href="#">–û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞</a>
          <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs">
    <div class="container tabs-inner">
      <div></div>
      <div style="display:flex;gap:8px">
        <button class="tab active" data-tab="catalog">–ö–∞—Ç–∞–ª–æ–≥</button>
        <button class="tab" data-tab="checkout">–ö–æ—Ä–∑–∏–Ω–∞/–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
        <button class="tab" data-tab="success">–£—Å–ø–µ—Ö</button>
        <button class="tab" data-tab="admin">–ê–¥–º–∏–Ω</button>
      </div>
    </div>
  </div>

  <!-- CATALOG -->
  <section id="catalog" class="container" style="padding:24px 16px">
    <div class="card" style="padding:24px;margin-bottom:16px">
      <div class="grid grid-cols" style="gap:16px">
        <div>
          <span class="pill" id="ribbon"></span>
          <h1 style="margin:12px 0 0;font-size:28px;font-weight:800;line-height:1.2" id="heroTitle"></h1>
          <p class="muted" style="margin:8px 0 0;max-width:680px" id="heroSubtitle"></p>
          <div style="margin-top:16px"><input class="input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ—Ä—Ç–∞–º –∏ —Ü–≤–µ—Ç–∞–º..." id="search"/></div>
        </div>
        <div class="card" style="overflow:hidden"><img class="thumb" src="https://images.unsplash.com/photo-1464965911861-746a04b4bca6?q=80&w=1200&auto=format&fit=crop" alt="Tulips"/></div>
      </div>
    </div>

    <div class="grid grid-cols" style="gap:16px">
      <div>
        <div style="display:flex;justify-content:space-between;align-items:end">
          <h2 style="font-size:20px;font-weight:700">–ö–∞—Ç–∞–ª–æ–≥ —Å–æ—Ä—Ç–æ–≤</h2>
          <div class="xs muted">–ù–∞–π–¥–µ–Ω–æ: <span id="found">0</span></div>
        </div>
        <div class="list" style="margin-top:8px" id="catalogList"></div>
      </div>

      <div class="card" style="padding:16px">
        <h3 style="font-size:18px;font-weight:600" id="quickOrder"></h3>
        <div class="muted xs" style="margin-top:8px" id="quickOrderHint">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ä—Ç —Å–ª–µ–≤–∞, –∑–∞—Ç–µ–º —É–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É.</div>
        <div style="margin-top:12px">
          <div style="font-size:14px;font-weight:600">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ, —à—Ç</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
            <button class="btn qty-btn" data-n="50">√ó50</button>
            <button class="btn qty-btn" data-n="100">√ó100</button>
            <button class="btn qty-btn" data-n="200">√ó200</button>
            <input id="qtyInput" class="input" style="width:120px" type="number" min="1" step="1" placeholder="–°–≤–æ—ë –∫–æ–ª-–≤–æ" />
          </div>
        </div>
        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;background:rgba(43,178,76,.06);padding:12px;border-radius:14px">
          <div class="muted" style="font-size:14px">–ò—Ç–æ–≥ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–æ—Ä—Ç:</div>
          <div style="font-size:18px;font-weight:800;color:var(--brand-primary)" id="sum">‚Äî ‚ÇΩ</div>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn btn-primary" id="btnAdd">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
          <button class="btn" id="btnGoCheckout">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</button>
        </div>
      </div>
    </div>
  </section>

  <!-- CHECKOUT -->
  <section id="checkout" class="container hidden" style="padding:24px 16px">
    <div class="grid" style="gap:16px;grid-template-columns:1fr 1fr">
      <div class="card" style="padding:16px">
        <h2 style="font-size:18px;font-weight:600" id="checkoutTitle"></h2>
        <div style="margin-top:8px" id="cartList"></div>
        <div class="card" style="margin-top:8px;padding:10px;font-size:12px;color:#4b5563">–ì–æ—Ä–æ–¥: <b id="summaryCity">‚Äî</b> ‚Ä¢ –¢–µ–ª–µ—Ñ–æ–Ω: <b id="summaryPhone">‚Äî</b> ‚Ä¢ –ê–¥—Ä–µ—Å: <b id="summaryAddr">‚Äî</b></div>
      </div>

      <form class="card" style="padding:16px">
        <h2 style="font-size:18px;font-weight:600" id="contactTitle"></h2>
        <div class="grid" style="gap:10px">
          <div>
            <label class="xs muted">–ò–º—è*</label>
            <input class="input" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è" />
          </div>
          <div>
            <label class="xs muted">–¢–µ–ª–µ—Ñ–æ–Ω*</label>
            <input class="input" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è" />
          </div>
          <div>
            <label class="xs muted">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
            <textarea rows="3" class="input" placeholder="–°—Ä–æ–∫–∏, —É–ø–∞–∫–æ–≤–∫–∞, –∞–¥—Ä–µ—Å —Å–∫–ª–∞–¥–∞"></textarea>
          </div>
        </div>
        <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center;gap:8px">
          <div class="xs muted">–ù–∞–∂–∏–º–∞—è, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</div>
          <button class="btn btn-primary" type="button" onclick="showSuccess()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </form>
    </div>
  </section>

  <!-- SUCCESS -->
  <section id="success" class="container hidden" style="padding:48px 16px;text-align:center">
    <div class="card" style="max-width:560px;margin:0 auto;padding:24px">
      <div style="font-size:32px">‚úÖ</div>
      <h1 style="margin:8px 0 0;font-size:24px;font-weight:800" id="successTitle"></h1>
      <p class="muted" style="margin:8px 0 0"><span id="successNumber"></span> <span style="font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas">ORD-ABCD12</span></p>
      <p class="muted" style="margin:8px 0 0">–í–∞—à –≥–æ—Ä–æ–¥: <b id="successCity">‚Äî</b></p>
      <div style="margin-top:16px;display:flex;justify-content:center;gap:8px">
        <button class="btn" onclick="switchTab('catalog')">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
        <button class="btn btn-primary" onclick="switchTab('checkout')">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
      </div>
    </div>
  </section>

  <!-- ADMIN -->
  <section id="admin" class="container hidden" style="padding:24px 16px">
    <div class="card" style="padding:16px">
      <h1 style="font-size:20px;font-weight:800" id="adminTitle"></h1>
      <p class="muted" style="margin:4px 0 0" id="adminNote"></p>
      <div class="list" style="margin-top:12px" id="adminList"></div>
    </div>
  </section>

  <div class="footer">
    <span id="footCity">‚Äî</span> ¬∑ <span id="footAddr">‚Äî</span> ¬∑ <span id="footPhone">‚Äî</span><br/>
    ¬© <span id="year"></span> –¶–≤–µ—Ç–æ—Ñ–æ—Ä ¬∑ –ë—ã—Å—Ç—Ä–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ ¬∑ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏
  </div>

  <script>
    // ==== INIT THEME & BRAND ====
    document.documentElement.style.setProperty('--brand-primary', CONFIG.theme.brandPrimary);
    document.documentElement.style.setProperty('--pink-1', CONFIG.theme.gradientFrom);
    document.documentElement.style.setProperty('--pink-2', CONFIG.theme.gradientTo);
    document.documentElement.style.setProperty('--border', CONFIG.theme.border);
    document.getElementById('brandTitle').textContent = CONFIG.brand.title;
    document.getElementById('brandLogo').textContent = CONFIG.brand.logoEmoji;

    // ==== Fill texts ====
    ribbon.textContent = CONFIG.texts.ribbon;
    heroTitle.textContent = CONFIG.texts.heroTitle;
    heroSubtitle.textContent = CONFIG.texts.heroSubtitle;
    quickOrder.textContent = CONFIG.texts.quickOrder;
    btnAdd.textContent = CONFIG.texts.btnAdd;
    btnGoCheckout.textContent = CONFIG.texts.btnGoCheckout;
    checkoutTitle.textContent = CONFIG.texts.checkoutTitle;
    contactTitle.textContent = CONFIG.texts.contactTitle;
    successTitle.textContent = CONFIG.texts.successTitle;
    successNumber.textContent = CONFIG.texts.successNumber;
    adminTitle.textContent = CONFIG.texts.adminTitle;
    adminNote.textContent = CONFIG.texts.adminNote;

    // ==== City select ====
    const citySel = document.getElementById('city');
    CONFIG.cities.forEach(c => {
      const opt = document.createElement('option');
      opt.textContent = c.name;
      citySel.appendChild(opt);
    });

    const footCity = document.getElementById('footCity');
    const footAddr = document.getElementById('footAddr');
    const footPhone = document.getElementById('footPhone');
    const summaryCity = document.getElementById('summaryCity');
    const summaryPhone = document.getElementById('summaryPhone');
    const summaryAddr = document.getElementById('summaryAddr');
    const successCity = document.getElementById('successCity');

    function applyCity(){
      const name = citySel.value || CONFIG.cities[0].name;
      const city = CONFIG.cities.find(c => c.name === name) || CONFIG.cities[0];
      footCity.textContent = city.name; footAddr.textContent = city.address; footPhone.textContent = city.phone;
      summaryCity.textContent = city.name; summaryPhone.textContent = city.phone; summaryAddr.textContent = city.address;
      successCity.textContent = city.name;
    }
    citySel.addEventListener('change', applyCity);

    // Default select first city
    citySel.value = CONFIG.cities[0].name;
    applyCity();

    // ==== Catalog rendering ====
    const listEl = document.getElementById('catalogList');
    const foundEl = document.getElementById('found');
    const searchEl = document.getElementById('search');
    let selected = null;
    let qty = 0;

    function money(n){ return new Intl.NumberFormat('ru-RU').format(n); }

    function renderCatalog(){
      const q = (searchEl.value || '').trim().toLowerCase();
      const items = CONFIG.catalog.filter(t => !q || (t.name.toLowerCase().includes(q) || (t.desc||'').toLowerCase().includes(q)));
      listEl.innerHTML = '';
      items.forEach(t => {
        const wrap = document.createElement('button');
        wrap.className = 'card';
        wrap.style.textAlign = 'left';
        wrap.style.overflow = 'hidden';
        wrap.innerHTML = `
          <img class="thumb" src="${t.img}" alt="${t.name}"/>
          <div style="padding:16px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:600">${t.name}</div>
              <span class="price" style="color:${t.color}">${money(t.price)} ‚ÇΩ/—à—Ç</span>
            </div>
            <div class="muted" style="margin-top:6px;font-size:14px">${t.desc||''}</div>
            <div class="xs muted" style="margin-top:6px">–î–ª–∏–Ω–∞ —Å—Ç–µ–±–ª—è: ${t.stem}</div>
          </div>
        `;
        wrap.addEventListener('click', ()=> { selected = t; updateSum(); });
        listEl.appendChild(wrap);
      });
      foundEl.textContent = items.length;
    }

    searchEl.addEventListener('input', renderCatalog);

    // ==== Quick order block ====
    const qtyInput = document.getElementById('qtyInput');
    const sumEl = document.getElementById('sum');
    document.querySelectorAll('.qty-btn').forEach(b => {
      b.addEventListener('click', ()=> { qty = parseInt(b.dataset.n,10); qtyInput.value = qty; updateSum(); });
    });
    qtyInput.addEventListener('input', ()=> { qty = parseInt(qtyInput.value || '0',10); updateSum(); });
    btnAdd.addEventListener('click', ()=> { alert(selected ? `–í –∫–æ—Ä–∑–∏–Ω—É: ${selected.name} √ó ${qty}` : '–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ä—Ç'); });
    btnGoCheckout.addEventListener('click', ()=> { switchTab('checkout'); });

    function updateSum(){
      if (selected && qty>0) sumEl.textContent = money(selected.price * qty) + ' ‚ÇΩ';
      else sumEl.textContent = '‚Äî ‚ÇΩ';
    }

    // ==== Tabs ====
    const tabs = document.querySelectorAll('.tab');
    const sections = {catalog, checkout, success, admin};
    tabs.forEach(t=> t.addEventListener('click', ()=> switchTab(t.dataset.tab)));
    function switchTab(name){
      Object.keys(sections).forEach(k=> sections[k].classList.toggle('hidden', k!==name));
      tabs.forEach(t=> t.classList.toggle('active', t.dataset.tab===name));
      window.scrollTo({top:0,behavior:'smooth'});
      if(name==='checkout') renderCart();
    }
    function showSuccess(){ switchTab('success'); }

    // ==== Cart mock (from selection) ====
    const cartList = document.getElementById('cartList');
    function renderCart(){
      cartList.innerHTML = '';
      if(!(selected && qty>0)){
        cartList.innerHTML = `<div class="muted" style="margin-top:8px">–ü—É—Å—Ç–æ. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ <button class="btn" onclick="switchTab('catalog')">–∫–∞—Ç–∞–ª–æ–≥</button>.</div>`;
        return;
      }
      cartList.innerHTML = `
        <div style="display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid var(--border)">
          <img src="${selected.img}" style="width:64px;height:48px;object-fit:cover;border-radius:10px" />
          <div style="flex:1">
            <div style="font-weight:600">${selected.name}</div>
            <div class="xs muted">${money(selected.price)} ‚ÇΩ/—à—Ç</div>
          </div>
          <input class="input" style="width:80px" type="number" min="1" value="${qty}" />
          <div style="width:100px;text-align:right;font-weight:700">${money(selected.price*qty)} ‚ÇΩ</div>
          <button class="btn" onclick="selected=null; qty=0; renderCart();">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
        <div style="display:flex;justify-content:space-between;padding-top:8px;font-weight:700">
          –ò—Ç–æ–≥–æ <span>${money(selected.price*qty)} ‚ÇΩ</span>
        </div>
      `;
    }

    // ==== Admin list (visual) ====
    const adminList = document.getElementById('adminList');
    function renderAdmin(){
      adminList.innerHTML = '';
      CONFIG.catalog.forEach(t => {
        const card = document.createElement('div');
        card.className = 'card';
        card.style.overflow = 'hidden';
        card.innerHTML = `
          <img class="thumb" src="${t.img}" alt="${t.name}"/>
          <div style="padding:16px">
            <div style="font-weight:600">${t.name}</div>
            <div class="xs muted">–°—Ç–µ–±–µ–ª—å: ${t.stem}</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
              <span style="font-size:14px">–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞, ‚ÇΩ/—à—Ç:</span>
              <input class="input" style="width:120px" type="number" min="1" value="${t.price}" />
            </div>
            <div style="display:flex;align-items:center;justify-content:space-between;margin-top:8px">
              <span class="xs">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:</span>
              <button class="btn btn-primary">–í–∫–ª—é—á–µ–Ω–æ</button>
            </div>
          </div>
        `;
        adminList.appendChild(card);
      });
    }

    // ==== Footer year ====
    document.getElementById('year').textContent = new Date().getFullYear();

    // initial renders
    renderCatalog();
    renderAdmin();
  </script>
</body>
</html>
