<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–¶–í–ï–¢–û–§–û–† ‚Äî –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ —Ç—é–ª—å–ø–∞–Ω–æ–≤</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect fill="white" width="64" height="64"/><path d="M32 42c6-6 10-12 10-18 0-6-4-10-10-10s-10 4-10 10c0 6 4 12 10 18z" fill="%23ff6fa5"/><path d="M32 60c0-10-3-18-9-24" stroke="%232BB24C" stroke-width="4" fill="none"/><path d="M32 60c0-10 3-18 9-24" stroke="%232BB24C" stroke-width="4" fill="none"/></svg>'/>
  <style>
    :root{ --brand-primary:#2BB24C; --brand-accent:#FFD400; --brand-danger:#E53935; --border:#e5e7eb; --pink-1:#ffe8f2; --pink-2:#fff0f7; --text:#0f172a; --muted:#6b7280;}
    *{box-sizing:border-box}
    body{ margin:0; font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--text); background:linear-gradient(to bottom,var(--pink-1),var(--pink-2)); }
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 16px}
    .top{border-bottom:1px solid var(--border);background:#fff}
    .top-inner{display:flex;align-items:center;justify-content:space-between;padding:10px 0;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand-logo{width:40px;height:40px;border-radius:14px;display:grid;place-items:center;background:#fff;border:1px solid var(--border);overflow:hidden}
    .brand-logo img,.brand-logo svg{width:30px;height:30px;object-fit:contain;display:block}
    .brand-title{font-size:22px;font-weight:800;letter-spacing:.3px;line-height:1}
    .brand-sub{font-size:12px;color:var(--muted)}
    nav .link{padding:8px 12px;border-radius:12px;font-size:14px}
    nav .link.active, nav .link:hover{background:#f3f4f6}
    .card{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:0 4px 14px rgba(0,0,0,.03)}
    .pad{padding:16px}
    .thumb{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:16px}
    .muted{color:var(--muted)}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:14px;background:#fff;font-weight:600;cursor:pointer}
    .btn:hover{background:#f9fafb}
    .btn-primary{background:var(--brand-primary);border-color:var(--brand-primary);color:#fff}
    .btn-primary:hover{filter:brightness(0.95)}
    .qtybox{display:flex;align-items:center;gap:8px}
    .qtybtn{width:36px;height:36px;border-radius:12px;border:1px solid var(--border);background:#fff;font-weight:700;font-size:18px;line-height:1;display:grid;place-items:center;cursor:pointer}
    .qtybtn:active{transform:translateY(1px)}
    .qtyinput{width:96px;text-align:center;padding:10px 8px;border:1px solid var(--border);border-radius:12px;font-weight:600}
    .grid{display:grid;gap:16px}
    @media(min-width:720px){ .grid-cols-2{grid-template-columns:repeat(2,1fr)} }
    @media(min-width:960px){ .grid-cols-3{grid-template-columns:repeat(3,1fr)} }
    footer{color:var(--muted);text-align:center;padding:24px 0;font-size:12px}
    .toast-wrap{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:50}
    .toast{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08);padding:12px 14px;min-width:240px}
    .toast.enter{animation:toastIn .35s ease-out}
    .toast.exit{animation:toastOut .3s ease-in forwards}
    @keyframes toastIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    @keyframes toastOut{to{opacity:0;transform:translateY(10px)}}
    .about{background:#fff;border:1px solid var(--border);border-radius:20px;padding:20px}
    .contacts{background:#fff;border:1px solid var(--border);border-radius:20px;padding:16px;display:grid;gap:6px}
    .ribbon{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-size:12px;background:rgba(43,178,76,.08);color:var(--brand-primary)}
    .price-pill{border:1px solid currentColor;border-radius:999px;padding:2px 8px;font-size:12px}
  </style>
</head>
<body>
  <script>
    const CONFIG = {
      brand: { title:"–¶–í–ï–¢–û–§–û–† ‚Äî –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ —Ç—é–ª—å–ø–∞–Ω–æ–≤", logoUrl:"logo.png" },
      cityText: "–≥. –£–ª–∞–Ω-–£–¥—ç",
      address: "—É–ª. –¢–æ–±–æ–ª—å—Å–∫–∞—è, 167 –ê",
      phone: "+7 914 841 615",
      cartStep: 20,
      colors: [
        { id:"yellow",        name:"–ñ—ë–ª—Ç—ã–π",           price:25, color:"#f4d03f", img:"https://images.unsplash.com/photo-1464965911861-746a04b4bca6?q=80&w=1200&auto=format&fit=crop" },
        { id:"white",         name:"–ë–µ–ª—ã–π",            price:25, color:"#d1d5db", img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop" },
        { id:"cream",         name:"–ö—Ä–µ–º–æ–≤—ã–π",         price:26, color:"#fae7d7", img:"https://images.unsplash.com/photo-1528832636320-3a99f6fb0f58?q=80&w=1200&auto=format&fit=crop" },
        { id:"pink",          name:"–†–æ–∑–æ–≤—ã–π",          price:26, color:"#f8a5c2", img:"https://images.unsplash.com/photo-1468824357306-a439d58ccb1c?q=80&w=1200&auto=format&fit=crop" },
        { id:"red",           name:"–ö—Ä–∞—Å–Ω—ã–π",          price:27, color:"#d7263d", img:"https://images.unsplash.com/photo-1456763961288-cde5f0a7c3fe?q=80&w=1200&auto=format&fit=crop" },
        { id:"pink-lilac",    name:"–†–æ–∑–æ–≤–æ‚Äë—Å–∏—Ä–µ–Ω–µ–≤—ã–π", price:27, color:"#c084fc", img:"https://images.unsplash.com/photo-1456763961288-cde5f0a7c3fe?q=80&w=1200&auto=format&fit=crop" },
        { id:"white-lilac",   name:"–ë–µ–ª–æ‚Äë—Å–∏—Ä–µ–Ω–µ–≤—ã–π",   price:27, color:"#a78bfa", img:"https://images.unsplash.com/photo-1456763961288-cde5f0a7c3fe?q=80&w=1200&auto=format&fit=crop" },
        { id:"orange",        name:"–û—Ä–∞–Ω–∂–µ–≤—ã–π",        price:26, color:"#f59e0b", img:"https://images.unsplash.com/photo-1528832636320-3a99f6fb0f58?q=80&w=1200&auto=format&fit=crop" },
        { id:"red-white",     name:"–ö—Ä–∞—Å–Ω–æ‚Äë–±–µ–ª—ã–π",     price:28, color:"#f87171", img:"https://images.unsplash.com/photo-1528832636320-3a99f6fb0f58?q=80&w=1200&auto=format&fit=crop" },
        { id:"violet",        name:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π",       price:28, color:"#6a0dad", img:"https://images.unsplash.com/photo-1456763961288-cde5f0a7c3fe?q=80&w=1200&auto=format&fit=crop" },
        { id:"white-pink",    name:"–ë–µ–ª–æ‚Äë—Ä–æ–∑–æ–≤—ã–π",     price:27, color:"#fecdd3", img:"https://images.unsplash.com/photo-1468824357306-a439d58ccb1c?q=80&w=1200&auto=format&fit=crop" },
        { id:"double-yellow", name:"–ú–∞—Ö—Ä–æ–≤—ã–π –∂—ë–ª—Ç—ã–π",  price:30, color:"#facc15", img:"https://images.unsplash.com/photo-1464965911861-746a04b4bca6?q=80&w=1200&auto=format&fit=crop" },
        { id:"double-pink",   name:"–ú–∞—Ö—Ä–æ–≤—ã–π —Ä–æ–∑–æ–≤—ã–π", price:30, color:"#f472b6", img:"https://images.unsplash.com/photo-1468824357306-a439d58ccb1c?q=80&w=1200&auto=format&fit=crop" },
        { id:"mix",           name:"–ú–∏–∫—Å",             price:26, color:"#22c55e", img:"https://images.unsplash.com/photo-1464965911861-746a04b4bca6?q=80&w=1200&auto=format&fit=crop" }
      ],
      aboutText: "–ë—Ä–µ–Ω–¥ ¬´–¶–≤–µ—Ç–æ—Ñ–æ—Ä¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ä—ã–Ω–∫–µ –±–æ–ª–µ–µ 12 –ª–µ—Ç. –í —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ–ø–ª–∏—Ü–∞—Ö –≤—ã—Ä–∞—â–∏–≤–∞—é—Ç—Å—è —Ç—é–ª—å–ø–∞–Ω—ã –∏–∑ –ª—É—á—à–∏—Ö –≥–æ–ª–ª–∞–Ω–¥—Å–∫–∏—Ö –ª—É–∫–æ–≤–∏—Ü.",
      aboutBullets: [
        "–ë–æ–ª–µ–µ 12 –ª–µ—Ç –æ–ø—ã—Ç–∞.",
        "–ö—Ä–∞—Å–∏–≤—ã–µ –∫—Ä—É–ø–Ω—ã–µ –±—É—Ç–æ–Ω—ã 5‚Äì7 —Å–º.",
        "–û—Ç–æ–±—Ä–∞–Ω–Ω—ã–µ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∞.",
        "–í—ã—Å–æ–∫–∏–π —Å—Ç–µ–±–µ–ª—å (45‚Äì60 —Å–º, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Ä—Ç–∞).",
        "–í –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ –±–æ–ª–µ–µ 10 —Å–æ—á–Ω—ã—Ö –∏ —è—Ä–∫–∏—Ö —Ä–∞—Å—Ü–≤–µ—Ç–æ–∫.",
        "–ì–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã: –¥–æ–≥–æ–≤–æ—Ä—ã, —É–¥–æ–±–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã.",
        "–ü—Ä–∏ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—É –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞.",
        "–ì—Ä–∞–¥–∞—Ü–∏—è —Ü–µ–Ω –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–∞.",
        "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –æ—Ç 500 —à—Ç."
      ]
    };
  </script>

  <header class="top">
    <div class="container top-inner">
      <div class="brand">
        <div class="brand-logo" id="logoBox">
          <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><rect fill="#fff" width="64" height="64"/><path d="M32 42c6-6 10-12 10-18 0-6-4-10-10-10s-10 4-10 10c0 6 4 12 10 18z" fill="#ff6fa5"/><path d="M32 60c0-10-3-18-9-24" stroke="#2BB24C" stroke-width="4" fill="none"/><path d="M32 60c0-10 3-18 9-24" stroke="#2BB24C" stroke-width="4" fill="none"/></svg>
        </div>
        <div>
          <div class="brand-title" id="brandTitle">–¶–í–ï–¢–û–§–û–† ‚Äî –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ —Ç—é–ª—å–ø–∞–Ω–æ–≤</div>
          <div class="brand-sub" id="brandSub">–≥. –£–ª–∞–Ω-–£–¥—ç ¬∑ –ë—ã—Å—Ç—Ä–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ ¬∑ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏</div>
        </div>
      </div>
      <nav>
        <a class="link active" href="#catalog" onclick="navTo('catalog')">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a class="link" href="#checkout" onclick="navTo('checkout')">–ö–æ—Ä–∑–∏–Ω–∞ / –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</a>
      </nav>
    </div>
  </header>

  <div class="toast-wrap" id="toasts"></div>

  <main class="container" style="padding:16px">
    <section class="card pad" style="margin:12px 0 16px">
      <div class="ribbon">–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –Ω–∞ —Å–µ–∑–æ–Ω ‚Ä¢ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—É</div>
      <h1 style="margin:10px 0 6px;font-size:26px;font-weight:800;line-height:1.2">–¢—é–ª—å–ø–∞–Ω—ã –æ–ø—Ç–æ–º –ø–æ —Ü–≤–µ—Ç–∞–º</h1>
      <p class="muted" style="margin:0">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–∫—Ä–∞—Ç–Ω–æ 20), –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–∫–∞–∑.</p>
    </section>

    <section id="catalogSection">
      <div class="grid grid-cols-3" id="catalogGrid"></div>
    </section>

    <section style="margin-top:16px" class="grid grid-cols-2">
      <div class="about">
        <h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–û –∫–æ–º–ø–∞–Ω–∏–∏</h2>
        <p class="muted" id="aboutP" style="margin:6px 0 10px"></p>
        <ul id="aboutUl" class="muted" style="margin:0 0 0 18px"></ul>
      </div>
      <div class="contacts">
        <h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div>üìç <b id="addr"></b></div>
        <div>üèôÔ∏è <span id="city"></span></div>
        <div>üìû <a id="tel" href="#">+7 914 841 615</a> <span class="muted">(WhatsApp / Telegram)</span></div>
      </div>
    </section>
  </main>

  <section id="checkoutSection" class="container" style="display:none;padding:16px">
    <div class="card pad">
      <h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–ö–æ—Ä–∑–∏–Ω–∞ / –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
      <div id="cartBox" style="margin-top:8px"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div class="muted">–ò—Ç–æ–≥–æ: <b id="sumRur">0 ‚ÇΩ</b></div>
        <div style="display:flex;gap:8px">
          <button class="btn" onclick="navTo('catalog')">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</button>
          <button class="btn btn-primary" onclick="placeOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </div>
    </div>
  </section>

  <footer>¬© <span id="year"></span> –¶–≤–µ—Ç–æ—Ñ–æ—Ä ¬∑ –ë—ã—Å—Ç—Ä–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ ¬∑ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏</footer>

  <script>
    const money = n => new Intl.NumberFormat('ru-RU').format(n) + ' ‚ÇΩ';
    const step = CONFIG.cartStep || 20;

    function toast(html, ms=3000){
      const wrap = document.getElementById('toasts');
      const el = document.createElement('div');
      el.className = 'toast enter';
      el.innerHTML = html;
      wrap.appendChild(el);
      setTimeout(()=>{ el.classList.remove('enter'); el.classList.add('exit'); }, ms);
      setTimeout(()=> wrap.removeChild(el), ms+350);
    }

    function navTo(name){
      document.querySelectorAll('nav .link').forEach(a=> a.classList.toggle('active', a.getAttribute('href')==='#'+name));
      document.getElementById('catalogSection').style.display = (name==='catalog')?'block':'none';
      document.getElementById('checkoutSection').style.display = (name==='checkout')?'block':'none';
      window.scrollTo({top:0,behavior:'smooth'});
      if(name==='checkout') renderCart();
      history.replaceState(null,'','#'+name);
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('brandTitle')?.textContent = CONFIG.brand.title;
    document.getElementById('brandSub')?.textContent = CONFIG.cityText + ' ¬∑ –ë—ã—Å—Ç—Ä–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ ¬∑ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏';
    document.getElementById('addr').textContent = CONFIG.address;
    document.getElementById('city').textContent = CONFIG.cityText;
    document.getElementById('tel').href = 'tel:' + CONFIG.phone.replace(/\s|\(|\)|-/g,'');

    if(CONFIG.brand.logoUrl){
      const img = new Image();
      img.onload = () => { document.getElementById('logoBox').innerHTML = ''; document.getElementById('logoBox').appendChild(img); };
      img.src = CONFIG.brand.logoUrl;
      img.alt = '–õ–æ–≥–æ—Ç–∏–ø –¶–≤–µ—Ç–æ—Ñ–æ—Ä';
      img.style.width = '30px'; img.style.height = '30px'; img.style.objectFit = 'contain';
    }

    document.getElementById('aboutP').textContent = CONFIG.aboutText;
    document.getElementById('aboutUl').innerHTML = CONFIG.aboutBullets.map(li => '<li>'+li+'</li>').join('');

    const cart = []; // {id,name,price,qty,img}

    function ensureStep(v){
      v = Math.max(step, Math.round(v/step)*step);
      if(v % step !== 0) v = Math.round(v/step)*step;
      return v;
    }

    function makeCard(item){
      const card = document.createElement('div');
      card.className = 'card pad';
      card.innerHTML = `
        <img class="thumb" src="${item.img}" alt="${item.name}"/>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <div style="font-weight:700">${item.name}</div>
          <span class="price-pill" style="color:${item.color}">${money(item.price)}/—à—Ç</span>
        </div>
        <div class="qtybox" style="margin-top:10px">
          <button class="qtybtn" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å">‚àí</button>
          <input class="qtyinput" type="number" min="${step}" step="${step}" value="${step}" />
          <button class="qtybtn" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">+</button>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
          <div class="muted">–°—É–º–º–∞: <b class="lineSum">${money(item.price*step)}</b></div>
          <button class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
      `;
      const btns = card.querySelectorAll('.qtybtn');
      const input = card.querySelector('.qtyinput');
      const sumEl = card.querySelector('.lineSum');
      const addBtn = card.querySelector('.btn.btn-primary');

      function updateSum(){
        let v = parseInt(input.value||step,10);
        v = ensureStep(v);
        input.value = v;
        sumEl.textContent = money(v * item.price);
      }
      btns[0].addEventListener('click', ()=>{ let v=parseInt(input.value||step,10)-step; input.value = Math.max(step, v); updateSum(); });
      btns[1].addEventListener('click', ()=>{ let v=parseInt(input.value||step,10)+step; input.value = v; updateSum(); });
      input.addEventListener('input', updateSum);
      updateSum();

      addBtn.addEventListener('click', ()=>{
        const qty = ensureStep(parseInt(input.value||step,10));
        const idx = cart.findIndex(x=>x.id===item.id);
        if(idx>-1){ cart[idx].qty += qty; } else { cart.push({id:item.id,name:item.name,price:item.price,qty, img:item.img}); }
        toast('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É: <b>'+item.name+'</b> ‚Äî '+qty+' —à—Ç.');
      });

      return card;
    }

    function renderCatalog(){
      const grid = document.getElementById('catalogGrid');
      grid.innerHTML = '';
      CONFIG.colors.forEach(item => grid.appendChild(makeCard(item)));
    }
    renderCatalog();

    function renderCart(){
      const box = document.getElementById('cartBox');
      if(cart.length===0){
        box.innerHTML = '<div class="muted">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞.</div>';
        document.getElementById('sumRur').textContent = money(0);
        return;
      }
      let html = '';
      cart.forEach(line=>{
        html += `
          <div style="display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid var(--border)">
            <img src="${line.img}" style="width:72px;height:54px;object-fit:cover;border-radius:10px"/>
            <div style="flex:1">
              <div style="font-weight:700">${line.name}</div>
              <div class="muted" style="font-size:12px">${money(line.price)} / —à—Ç</div>
            </div>
            <div class="qtybox">
              <button class="qtybtn" data-id="${line.id}" data-act="minus">‚àí</button>
              <input class="qtyinput" data-id="${line.id}" type="number" min="${step}" step="${step}" value="${line.qty}"/>
              <button class="qtybtn" data-id="${line.id}" data-act="plus">+</button>
            </div>
            <div style="width:140px;text-align:right;font-weight:700">${money(line.qty*line.price)}</div>
            <button class="btn" data-id="${line.id}" data-act="remove">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        `;
      });
      box.innerHTML = html;

      box.querySelectorAll('.qtybtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-id');
          const act = btn.getAttribute('data-act');
          const line = cart.find(x=>x.id===id);
          if(!line) return;
          if(act==='minus') line.qty = Math.max(step, line.qty - step);
          if(act==='plus') line.qty = line.qty + step;
          renderCart();
        });
      });
      box.querySelectorAll('.qtyinput').forEach(inp=>{
        inp.addEventListener('input', ()=>{
          const id = inp.getAttribute('data-id');
          const line = cart.find(x=>x.id===id);
          if(!line) return;
          let v = ensureStep(parseInt(inp.value||step,10));
          line.qty = v;
          renderCart();
        });
      });
      box.querySelectorAll('[data-act="remove"]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-id');
          const idx = cart.findIndex(x=>x.id===id);
          if(idx>-1) cart.splice(idx,1);
          renderCart();
        });
      });

      const total = cart.reduce((s,l)=> s + l.qty*l.price, 0);
      document.getElementById('sumRur').textContent = money(total);
    }

    function placeOrder(){
      if(cart.length===0){ toast('‚ö†Ô∏è –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; }
      toast('‚úÖ –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!<br/>üìû –° –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ üå∏', 4000);
      // cart.length = 0; renderCart(); navTo('catalog');
    }

    if(location.hash==='#checkout') navTo('checkout'); else navTo('catalog');
  </script>
</body>
</html>
