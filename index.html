–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>–¶–≤–µ—Ç–æ—Ñ–æ—Ä ‚Äî –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π —Ç—é–ª—å–ø–∞–Ω | –û–ø—Ç–æ–≤—ã–µ —Ü–µ–Ω—ã –æ—Ç 75 ‚ÇΩ</title>
  <meta name="description" content="üå∑ ¬´–¶–≤–µ—Ç–æ—Ñ–æ—Ä¬ª ‚Äî —Ç—é–ª—å–ø–∞–Ω—ã –ø–æ –æ–ø—Ç–æ–≤—ã–º —Ü–µ–Ω–∞–º —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –†–æ—Å—Å–∏–∏. –°–≤–µ–∂–∏–µ, –∫—Ä—É–ø–Ω—ã–µ –±—É—Ç–æ–Ω—ã –∏–∑ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–æ–≥–æ –∫—Ä–∞—è. –ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –æ—Ç 20 –¥–æ 100 000 —à—Ç—É–∫ ‚Äî –≥–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è –∏ —Å–∫–∏–¥–∫–∏ –∫—Ä—É–ø–Ω—ã–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º!">
  <meta name="robots" content="index,follow">
  <meta name="theme-color" content="#ff6fa5">

  <!-- –ò–∫–æ–Ω–∫–∏ -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

  <!-- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ (–æ—Å—Ç–∞–≤—å –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ —É–∂–µ –¥–æ–±–∞–≤–ª—è–ª —Å–≤–æ–∏ –∫–æ–¥—ã) -->
  <meta name="google-site-verification" content="8CGmjoAJgxzpBQXYqL0J-S0etYKgjEnoZQiQ6203MWU">
  <meta name="yandex-verification" content="fbc4d167297f293e">

  <!-- Open Graph -->
  <meta property="og:title" content="–¶–≤–µ—Ç–æ—Ñ–æ—Ä ‚Äî –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π —Ç—é–ª—å–ø–∞–Ω –ø–æ –æ–ø—Ç–æ–≤—ã–º —Ü–µ–Ω–∞–º">
  <meta property="og:description" content="–¢—é–ª—å–ø–∞–Ω—ã –æ—Ç 75 ‚ÇΩ | –°–≤–µ–∂–∏–µ, –∫—Ä—É–ø–Ω—ã–µ –±—É—Ç–æ–Ω—ã | –ó–∞–∫–∞–∑ –æ—Ç 20 —à—Ç. —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –†–æ—Å—Å–∏–∏">
  <meta property="og:image" content="https://—Ç—é–ª—å–ø–∞–Ω03.—Ä—Ñ/favicon.png">
  <meta property="og:url" content="https://—Ç—é–ª—å–ø–∞–Ω03.—Ä—Ñ/">
  <meta property="og:type" content="website">

  <!-- –®—Ä–∏—Ñ—Ç—ã -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#2BB24C;
      --accent:#FFD400;
      --danger:#E53935;
      --border:#e5e7eb;
      --text:#0f172a;
      --muted:#6b7280;
      --pink1:#ffe8f2;
      --pink2:#fff0f7;
      --red:#e94197;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:linear-gradient(to bottom,var(--pink1),var(--pink2));
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 16px}
    header.top{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--border);backdrop-filter:saturate(120%) blur(6px)}
    .top-inner{display:flex;align-items:center;justify-content:space-between;padding:10px 0;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand-logo{width:40px;height:40px;border-radius:14px;display:grid;place-items:center;background:#fff;border:1px solid var(--border);overflow:hidden}
    .brand-logo img{width:30px;height:30px;object-fit:contain;display:block}
    .brand-title{font-size:20px;font-weight:800;letter-spacing:.2px;line-height:1}
    .brand-sub{font-size:12px;color:#000}
    nav .link{padding:8px 12px;border-radius:12px;font-size:14px}
    nav .link.active, nav .link:hover{background:#f3f4f6}

    .hero{margin:12px 0 16px}
    .ribbon{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;font-size:12px;background:rgba(43,178,76,.08);color:var(--brand)}

    .card{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:0 4px 14px rgba(0,0,0,.03)}
    .pad{padding:16px}
    .thumb{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:16px}
    .muted{color:var(--muted)}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:14px;background:#fff;font-weight:600;cursor:pointer}
    .btn:hover{background:#f9fafb}
    .btn-primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn-primary:hover{filter:brightness(0.97)}
    .qtybox{display:flex;align-items:center;gap:8px}
    .qtybtn{width:36px;height:36px;border-radius:12px;border:1px solid var(--border);background:#fff;font-weight:700;font-size:18px;line-height:1;display:grid;place-items:center;cursor:pointer}

–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
.qtybtn:active{transform:translateY(1px)}
    .qtyinput{width:108px;text-align:center;padding:10px 8px;border:1px solid var(--border);border-radius:12px;font-weight:600}
    .grid{display:grid;gap:16px}
    @media(min-width:720px){ .grid-cols-2{grid-template-columns:repeat(2,1fr)} }
    @media(min-width:960px){ .grid-cols-3{grid-template-columns:repeat(3,1fr)} }

    footer{color:var(--muted);text-align:center;padding:24px 0;font-size:12px}

    /* –¢–æ—Å—Ç—ã */
    .toast-wrap{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:50}
    .toast{background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08);padding:12px 14px;min-width:240px}
    .toast.enter{animation:toastIn .35s ease-out}
    .toast.exit{animation:toastOut .3s ease-in forwards}
    @keyframes toastIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    @keyframes toastOut{to{opacity:0;transform:translateY(10px)}}

    /* –ú–æ–¥–∞–ª–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑" */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.15);width:min(520px,92vw)}
    .modal .head{display:flex;justify-content:flex-end;padding:8px}
    .modal .close{border:none;background:transparent;font-size:22px;cursor:pointer;line-height:1;padding:6px 10px;border-radius:10px}
    .modal .close:hover{background:#f5f5f5}
    .modal .body{padding:16px}
    .share-grid{display:grid;gap:10px}
    @media(min-width:520px){ .share-grid{grid-template-columns:repeat(3,1fr)} }
    .share-btn{display:flex;align-items:center;justify-content:center;gap:8px;border:1px solid var(--border);border-radius:14px;padding:12px;font-weight:700;cursor:pointer}
    .share-btn:hover{background:#fafafa}
    .wa{color:#25D366}
    .tg{color:#229ED9}
    .ph{color:#ef4444}

    /* –û –Ω–∞—Å + –∫–æ–Ω—Ç–∞–∫—Ç—ã */
    .about{background:#fff;border:1px solid var(--border);border-radius:20px;padding:20px}
    .contacts{background:#fff;border:1px solid var(--border);border-radius:20px;padding:16px;display:grid;gap:6px}
    .price-pill{border:1px solid currentColor;border-radius:999px;padding:2px 8px;font-size:12px}
  </style>
</head>
<body>
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <header class="top">
    <div class="container top-inner">
      <div class="brand">
        <div class="brand-logo"><img src="favicon.png" alt="–¶–≤–µ—Ç–æ—Ñ–æ—Ä"></div>
        <div>
          <div class="brand-title">–¶–≤–µ—Ç–æ—Ñ–æ—Ä ‚Äî –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —Ç—é–ª—å–ø–∞–Ω</div>
          <div class="brand-sub">–≥. –£–ª–∞–Ω-–£–¥—ç ¬∑ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ¬∑ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏</div>
        </div>
      </div>
      <nav>
        <a class="link active" href="#catalog" onclick="navTo('catalog')">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a class="link" href="#checkout" onclick="navTo('checkout')">–ö–æ—Ä–∑–∏–Ω–∞ / –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</a>
      </nav>
    </div>
  </header>

  <!-- –¢–æ—Å—Ç—ã -->
  <div class="toast-wrap" id="toasts"></div>

  <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
  <main class="container" style="padding:16px">
    <section class="card pad hero">
      <div class="ribbon">–ü—Ä–µ–¥–∑–∞–∫–∞–∑ —Å–µ–∑–æ–Ω–∞ ‚Ä¢ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—É –æ—Ç –æ–±—ä—ë–º–∞</div>
      <h1 style="margin:10px 0 6px;font-size:26px;font-weight:800;line-height:1.2;color:#000">
        –¢—é–ª—å–ø–∞–Ω—ã –ø–æ –æ–ø—Ç–æ–≤—ã–º —Ü–µ–Ω–∞–º
      </h1>
      <p class="muted" style="margin:0;color:#d7263d;font-weight:600">
        –í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–∫—Ä–∞—Ç–Ω–æ 20), –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑
      </p>
    </section>

    <!-- –ö–∞—Ç–∞–ª–æ–≥ -->
    <section id="catalogSection">
      <div class="grid grid-cols-3" id="catalogGrid"></div>
    </section>

    <!-- –û –Ω–∞—Å + –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
    <section style="margin-top:16px" class="grid grid-cols-2">
      <div class="about">

–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
<h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–û –Ω–∞—Å</h2>
        <p class="muted" id="aboutP" style="margin:6px 0 10px"></p>
        <ul id="aboutUl" class="muted" style="margin:0 0 0 18px"></ul>
      </div>
      <div class="contacts">
        <h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div>üìç <b>–≥. –£–ª–∞–Ω-–£–¥—ç, —É–ª. –¢–æ–±–æ–ª—å—Å–∫–∞—è, 167–ê</b></div>
        <div>üìû <a href="tel:+79148416115">+7 914 841 61 15</a> <span class="muted">(WhatsApp / Telegram)</span></div>
        <div>‚úâÔ∏è <a class="muted" href="https://t.me/flowerpot_03" target="_blank" rel="noopener">t.me/flowerpot_03</a></div>
      </div>
    </section>
  </main>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <section id="checkoutSection" class="container" style="display:none;padding:16px">
    <div class="card pad">
      <h2 style="margin:0 0 8px;font-size:20px;font-weight:800">–ö–æ—Ä–∑–∏–Ω–∞ / –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
      <div id="cartBox" style="margin-top:8px"></div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
        <div class="muted">–ò—Ç–æ–≥–æ: <b id="sumRur">0 ‚ÇΩ</b></div>
        <div style="display:flex;gap:8px">
          <button class="btn" onclick="navTo('catalog')">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</button>
          <button class="btn btn-primary" onclick="openSubmitModal()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </div>
    </div>
  </section>

  <!-- –ú–æ–¥–∞–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
  <div class="modal-backdrop" id="submitModal">
    <div class="modal">
      <div class="head"><button class="close" onclick="closeSubmitModal()">‚úï</button></div>
      <div class="body">
        <div class="share-grid">
          <a class="share-btn wa" id="waLink" target="_blank" rel="noopener">üí¨ WhatsApp</a>
          <a class="share-btn tg" id="tgLink" target="_blank" rel="noopener">‚úàÔ∏è Telegram</a>
          <a class="share-btn ph" id="phLink" href="tel:+79148416115">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
        </div>
      </div>
    </div>
  </div>

  <footer>¬© <span id="year"></span> –¶–≤–µ—Ç–æ—Ñ–æ—Ä ‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–≤–µ–∂–µ—Å—Ç–∏</footer>

  <script>
    // ========= –ê–¥–º–∏–Ω–∫–∞ —á–µ—Ä–µ–∑ Google Sheets =========
    // 1) –û—Ç–∫—Ä–æ–π Google Sheet -> –§–∞–π–ª -> –û–±—â–∏–π –¥–æ—Å—Ç—É–ø: "–£ –∫–æ–≥–æ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∞ - —á–∏—Ç–∞—Ç–µ–ª—å"
    // 2) –ò–º—è –ª–∏—Å—Ç–∞ –ø–æ—Å—Ç–∞–≤—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, "catalog"
    // 3) –ö–æ–ª–æ–Ω–∫–∏: id | name | group | img | available | colorHex
    //    group: normal | mix | double  (double = –º–∞—Ö—Ä–æ–≤—ã–µ)
    //    available: TRUE/FALSE
    //    –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏: white | –ë–µ–ª—ã–π | normal | https://...jpg | TRUE | #d1d5db

    const SHEET_ID   = "PASTE_YOUR_SHEET_ID_HERE";     // <<< –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π ID —Ç–∞–±–ª–∏—Ü—ã
    const SHEET_NAME = "catalog";                       // <<< –∑–∞–º–µ–Ω–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    const SHEET_URL  = https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)};

    // ========= –ö–æ–Ω—Ñ–∏–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã / —Ç–µ–∫—Å—Ç—ã "–û –Ω–∞—Å" =========
    const ABOUT_TEXT =
      "–ë—Ä–µ–Ω–¥ ¬´–¶–≤–µ—Ç–æ—Ñ–æ—Ä¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Ä—ã–Ω–∫–µ –±–æ–ª–µ–µ 12 –ª–µ—Ç. –í —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ–ø–ª–∏—Ü–∞—Ö –≤—ã—Ä–∞—â–∏–≤–∞—é—Ç—Å—è —Ç—é–ª—å–ø–∞–Ω—ã –∏–∑ –ª—É—á—à–∏—Ö –≥–æ–ª–ª–∞–Ω–¥—Å–∫–∏—Ö –ª—É–∫–æ–≤–∏—Ü.";
    const ABOUT_POINTS = [
      "–ë–æ–ª–µ–µ 12 –ª–µ—Ç –æ–ø—ã—Ç–∞.",
      "–ö—Ä–∞—Å–∏–≤—ã–µ –∫—Ä—É–ø–Ω—ã–µ –±—É—Ç–æ–Ω—ã 5‚Äì7 —Å–º.",
      "–û—Ç–æ–±—Ä–∞–Ω–Ω—ã–µ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∞.",
      "–í—ã—Å–æ–∫–∏–π —Å—Ç–µ–±–µ–ª—å (45‚Äì60 —Å–º).",
      "–ë–æ–ª–µ–µ 10 —Å–æ—á–Ω—ã—Ö –∏ —è—Ä–∫–∏—Ö —Ä–∞—Å—Ü–≤–µ—Ç–æ–∫.",
      "–ì–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã –∏ —Å–∫–∏–¥–∫–∏ –∫—Ä—É–ø–Ω—ã–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º.",
      "–ü—Ä–∏ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ü–µ–Ω—É –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞.",
      "–ì—Ä–∞–¥–∞—Ü–∏—è —Ü–µ–Ω –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–∞.",
      "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –æ—Ç 500 —à—Ç."
    ];

    // ========= –†–∞—Å—á—ë—Ç —Ü–µ–Ω –ø–æ –æ–±—ä—ë–º—É =========
    // –ì—Ä—É–ø–ø—ã: normal/mix ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ü–µ–Ω—ã; double (–º–∞—Ö—Ä–æ–≤—ã–µ) ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞
    function unitPrice(group, qty){
      // –∑–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–æ–ø—É—Å–∫–∏ (10000‚Äì15000) –±–ª–∏–∂–∞–π—à–∏–º —Ç–∞—Ä–∏—Ñ–æ–º
      if(group === 'double'){ // –º–∞—Ö—Ä–æ–≤—ã–µ
        if(qty >= 50000) return 85;
        if(qty >= 15000) return 86;

–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
if(qty >= 10000) return 86;
        if(qty >= 5000)  return 87;
        if(qty >= 3000)  return 88;
        if(qty >= 2000)  return 89;
        if(qty >= 1000)  return 90;
        if(qty >= 500)   return 98;
        return 109; // 20‚Äì499
      } else { // normal + mix
        if(qty >= 50000) return 75;
        if(qty >= 15000) return 76;
        if(qty >= 10000) return 76;
        if(qty >= 5000)  return 77;
        if(qty >= 3000)  return 78;
        if(qty >= 2000)  return 79;
        if(qty >= 1000)  return 80;
        if(qty >= 500)   return 88;
        return 99; // 20‚Äì499
      }
    }
    function minPriceForGroup(group){
      return group==='double' ? 85 : 75; // –ø–æ–¥–ø–∏—Å—å "–æ—Ç ‚Ä¶ /—à—Ç"
    }

    // ========= –£—Ç–∏–ª–∏—Ç—ã =========
    const money = n => new Intl.NumberFormat('ru-RU').format(n) + ' ‚ÇΩ';
    const STEP = 20;

    function toast(html, ms=3000){
      const wrap = document.getElementById('toasts');
      const el = document.createElement('div');
      el.className = 'toast enter';
      el.innerHTML = html;
      wrap.appendChild(el);
      setTimeout(()=>{ el.classList.remove('enter'); el.classList.add('exit'); }, ms);
      setTimeout(()=> wrap.removeChild(el), ms+350);
    }

    function navTo(name){
      document.querySelectorAll('nav .link').forEach(a=> a.classList.toggle('active', a.getAttribute('href')==='#'+name));
      document.getElementById('catalogSection').style.display = (name==='catalog')?'block':'none';
      document.getElementById('checkoutSection').style.display = (name==='checkout')?'block':'none';
      window.scrollTo({top:0,behavior:'smooth'});
      if(name==='checkout') renderCart();
      history.replaceState(null,'','#'+name);
    }

    // ========= –ö–∞—Ç–∞–ª–æ–≥ –∏–∑ Google Sheets =========
    let CATALOG = []; // {id,name,group,img,available,colorHex}
    const cart = [];  // {id,name,group,qty,img}

    async function loadSheet(){
      const res = await fetch(SHEET_URL);
      const text = await res.text();
      // –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ JS-–æ–±—ë—Ä—Ç–∫–∞ ‚Äî –≤—ã—Ä–µ–∑–∞–µ–º JSON
      const json = JSON.parse(text.slice(text.indexOf('{'), text.lastIndexOf('}')+1));
      const rows = json.table.rows || [];
      CATALOG = rows.map(r=>{
        const c = r.c || [];
        return {
          id:        (c[0]?.v||'').toString().trim(),
          name:      (c[1]?.v||'').toString().trim(),
          group:     (c[2]?.v||'normal').toString().trim().toLowerCase(), // normal | mix | double
          img:       (c[3]?.v||'').toString().trim(),
          available: (''+ (c[4]?.v ?? 'TRUE')).toUpperCase() !== 'FALSE',
          colorHex:  (c[5]?.v||'#dddddd').toString().trim()
        };
      }).filter(x=>x.id && x.name);
    }

    function ensureStep(v){
      v = Math.max(STEP, Math.round(v/STEP)*STEP);
      if(v % STEP !== 0) v = Math.round(v/STEP)*STEP;
      return v;
    }

    function makeCard(item){
      const card = document.createElement('div');
      card.className = 'card pad';
      const minP = minPriceForGroup(item.group);
      card.innerHTML = `
        <img class="thumb" src="${item.img}" alt="${item.name}"/>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <div style="font-weight:700">${item.name}</div>
          <span class="price-pill" style="color:${item.colorHex}">–æ—Ç ${money(minP)}/—à—Ç</span>
        </div>
        <div class="muted" style="margin-top:4px;font-size:12px">–¶–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä—ë–º–∞ –∑–∞–∫–∞–∑–∞</div>
        <div class="qtybox" style="margin-top:10px">
          <button class="qtybtn" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å">‚àí</button>
          <input class="qtyinput" type="number" min="${STEP}" step="${STEP}" value="${STEP}" />
          <button class="qtybtn" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">+</button>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">

–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
<div class="muted">–°—É–º–º–∞: <b class="lineSum">${money(unitPrice(item.group, STEP)*STEP)}</b></div>
          <button class="btn btn-primary" ${item.available?'':'disabled style="opacity:.5;cursor:not-allowed"'}>–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
      ;
      const btns = card.querySelectorAll('.qtybtn');
      const input = card.querySelector('.qtyinput');
      const sumEl = card.querySelector('.lineSum');
      const addBtn = card.querySelector('.btn.btn-primary');

      function updateSum(){
        let v = ensureStep(parseInt(input.value||STEP,10));
        input.value = v;
        sumEl.textContent = money(unitPrice(item.group, v)*v);
      }
      btns[0].addEventListener('click', ()=>{ let v=parseInt(input.value||STEP,10)-STEP; input.value = Math.max(STEP, v); updateSum(); });
      btns[1].addEventListener('click', ()=>{ let v=parseInt(input.value||STEP,10)+STEP; input.value = v; updateSum(); });
      input.addEventListener('input', updateSum);
      updateSum();

      addBtn.addEventListener('click', ()=>{
        if(!item.available) return;
        const qty = ensureStep(parseInt(input.value||STEP,10));
        const idx = cart.findIndex(x=>x.id===item.id);
        if(idx>-1){ cart[idx].qty += qty; }
        else { cart.push({id:item.id,name:item.name,group:item.group,qty, img:item.img}); }
        toast('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É: <b>'+item.name+'</b> ‚Äî '+qty+' —à—Ç.');
      });

      return card;
    }

    async function renderCatalog(){
      await loadSheet();
      const grid = document.getElementById('catalogGrid');
      grid.innerHTML = '';
      CATALOG.filter(x=>x.available).forEach(item => grid.appendChild(makeCard(item)));
    }

    function renderCart(){
      const box = document.getElementById('cartBox');
      if(cart.length===0){
        box.innerHTML = '<div class="muted">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞.</div>';
        document.getElementById('sumRur').textContent = money(0);
        return;
      }
      let html = '';
      cart.forEach(line=>{
        const u = unitPrice(line.group, line.qty);
        html += 
          <div style="display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid var(--border)">
            <img src="${line.img}" style="width:72px;height:54px;object-fit:cover;border-radius:10px"/>
            <div style="flex:1">
              <div style="font-weight:700">${line.name}</div>
              <div class="muted" style="font-size:12px">${money(u)} / —à—Ç (–æ–±—ä—ë–º–Ω–∞—è —Ü–µ–Ω–∞)</div>
            </div>
            <div class="qtybox">
              <button class="qtybtn" data-id="${line.id}" data-act="minus">‚àí</button>
              <input class="qtyinput" data-id="${line.id}" type="number" min="${STEP}" step="${STEP}" value="${line.qty}"/>
              <button class="qtybtn" data-id="${line.id}" data-act="plus">+</button>
            </div>
            <div style="width:160px;text-align:right;font-weight:700">${money(line.qty*u)}</div>
            <button class="btn" data-id="${line.id}" data-act="remove">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        `;
      });
      box.innerHTML = html;

      box.querySelectorAll('.qtybtn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-id');
          const act = btn.getAttribute('data-act');
          const line = cart.find(x=>x.id===id);
          if(!line) return;
          if(act==='minus') line.qty = Math.max(STEP, line.qty - STEP);
          if(act==='plus')  line.qty = line.qty + STEP;
          renderCart();
        });
      });
      box.querySelectorAll('.qtyinput').forEach(inp=>{
        inp.addEventListener('input', ()=>{
          const id = inp.getAttribute('data-id');
          const line = cart.find(x=>x.id===id);
          if(!line) return;

–ú–∏—Ö–∞–∏–ª –ö—Ä–∏–≤–æ–≥–æ—Ä–Ω–∏—Ü—ã–Ω, [06.11.2025 9:49]
let v = ensureStep(parseInt(inp.value||STEP,10));
          line.qty = v;
          renderCart();
        });
      });
      box.querySelectorAll('[data-act="remove"]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-id');
          const idx = cart.findIndex(x=>x.id===id);
          if(idx>-1) cart.splice(idx,1);
          renderCart();
        });
      });

      const total = cart.reduce((s,l)=> s + l.qty*unitPrice(l.group,l.qty), 0);
      document.getElementById('sumRur').textContent = money(total);
    }

    function openSubmitModal(){
      if(cart.length===0){ toast('‚ö†Ô∏è –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; }
      // —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞
      const lines = cart.map(l=>${l.name} ‚Äî ${l.qty} —à—Ç (–≥—Ä—É–ø–ø–∞: ${l.group})).join('%0A');
      const total = cart.reduce((s,l)=> s + l.qty*unitPrice(l.group,l.qty), 0);
      const msg = –ó–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞%0A${lines}%0A–ò—Ç–æ–≥–æ: ${money(total)};

      const wa = https://wa.me/79148416115?text=${msg};
      const tg = https://t.me/share/url?url=${encodeURIComponent('https://—Ç—é–ª—å–ø–∞–Ω03.—Ä—Ñ')}&text=${msg};
      document.getElementById('waLink').href = wa;
      document.getElementById('tgLink').href = tg;

      document.getElementById('submitModal').style.display = 'flex';
      toast('‚úÖ –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!<br/>üìû –° –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ üå∏', 4000);
    }
    function closeSubmitModal(){ document.getElementById('submitModal').style.display = 'none'; }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('aboutP').textContent = ABOUT_TEXT;
    document.getElementById('aboutUl').innerHTML = ABOUT_POINTS.map(li => '<li>'+li+'</li>').join('');
    if(location.hash==='#checkout') navTo('checkout'); else navTo('catalog');
    renderCatalog();
  </script>
</body>
</html>
