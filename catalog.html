<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–∞—Ç–∞–ª–æ–≥ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏—Ö —Ç—é–ª—å–ø–∞–Ω–æ–≤ ‚Äî –¢—é–ª—å–ø–∞–Ω03.—Ä—Ñ</title>
  <meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥ —Å–≤–µ–∂–∏—Ö —Ç—é–ª—å–ø–∞–Ω–æ–≤ –æ—Ç –±—Ä–µ–Ω–¥–∞ –¶–≤–µ—Ç–æ—Ñ–æ—Ä. –û–ø—Ç–æ–≤—ã–µ —Ü–µ–Ω—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∑–∞–∫–∞–∑–µ.">
  <style>
    :root {
      --brand:#E33400;
      --muted:#666;
      --bg:#fff;
      --stroke:#e5e7eb;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Roboto,Inter,sans-serif;background:var(--bg);color:#111}
    a{text-decoration:none;color:inherit}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--stroke);padding:12px 0;z-index:10}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .spread{display:flex;justify-content:space-between;align-items:center}
    .logo{font-weight:800;font-size:22px}
    nav a{margin-left:14px;font-weight:500}
    nav a:hover{color:var(--brand)}
    h1{font-size:28px;margin:24px 0 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}
    .card{border:1px solid var(--stroke);border-radius:var(--radius);overflow:hidden;background:#f9fafb;display:flex;flex-direction:column}
    .card img{width:100%;height:200px;object-fit:cover}
    .card .body{padding:16px;flex:1;display:flex;flex-direction:column}
    .card strong{display:block;margin-bottom:4px}
    .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
    .controls{display:flex;align-items:center;gap:6px;margin:6px 0}
    .controls button{width:32px;height:32px;border:1px solid #ccc;border-radius:8px;background:#fff;font-size:18px;cursor:pointer}
    input.qty{width:60px;text-align:center;padding:6px;border:1px solid #ccc;border-radius:8px}
    .price{font-size:18px;font-weight:700;margin-top:auto}
    .btn{display:inline-block;padding:10px 16px;border-radius:10px;border:1px solid var(--brand);background:var(--brand);color:#fff;font-weight:600;text-align:center;margin-top:10px}
    .btn:hover{opacity:.9}
    footer{border-top:1px solid var(--stroke);padding:16px 0;text-align:center;color:var(--muted);font-size:14px;margin-top:40px}
    #cart{margin-top:40px;border-top:2px solid var(--stroke);padding-top:24px}
    table{width:100%;border-collapse:collapse;margin-bottom:20px}
    th,td{border-bottom:1px solid var(--stroke);padding:8px;text-align:left}
    tfoot td{font-weight:700}
    .contact-buttons{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn-wa{background:#25D366;border-color:#25D366}
    .btn-tg{background:#229ED9;border-color:#229ED9}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;justify-content:center;align-items:center;z-index:1000}
    .modal{background:#fff;padding:24px;border-radius:16px;max-width:400px;width:90%}
    .modal input{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px}
  </style>
</head>
<body>

<header>
  <div class="container spread">
    <div class="logo">üå∑ –¢—é–ª—å–ø–∞–Ω03</div>
    <nav>
      <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="#cart">–ö–æ—Ä–∑–∏–Ω–∞</a>
    </nav>
  </div>
</header>

<main class="container">
  <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ç—é–ª—å–ø–∞–Ω–æ–≤</h1>
  <div class="grid" id="grid"></div>

  <section id="cart">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cartTable"></div>
    <div class="contact-buttons">
      <button class="btn btn-wa" onclick="openForm('wa')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å WhatsApp</button>
      <button class="btn btn-tg" onclick="openForm('tg')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å Telegram</button>
    </div>
  </section>
</main>

<footer>
  ¬© 2025 –¢—é–ª—å–ø–∞–Ω03.—Ä—Ñ ‚Äî —Å–≤–µ–∂–∏–µ —Ü–≤–µ—Ç—ã –æ–ø—Ç–æ–º üå∑
</footer>

<!-- –ú–æ–¥–∞–ª–∫–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö -->
<div class="overlay" id="formOverlay">
  <div class="modal">
    <h3>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏</h3>
    <input id="fio" placeholder="–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ">
    <input id="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
    <div class="contact-buttons">
      <button class="btn btn-wa" onclick="sendOrder('wa')">WhatsApp</button>
      <button class="btn btn-tg" onclick="sendOrder('tg')">Telegram</button>
    </div>
    <div style="text-align:center;margin-top:8px">
      <a href="#" onclick="closeForm();return false;">–û—Ç–º–µ–Ω–∞</a>
    </div>
  </div>
</div>

<script>
const tiersDefault = [
  {min:20,max:500,price:99},
  {min:500,max:1000,price:88},
  {min:1000,max:2000,price:80},
  {min:2000,max:3000,price:79},
  {min:3000,max:5000,price:78},
  {min:5000,max:10000,price:77},
  {min:15000,max:50000,price:76},
  {min:50000,max:100000,price:75}
];
const tiersMahrovye = [
  {min:20,max:500,price:109},
  {min:500,max:1000,price:98},
  {min:1000,max:2000,price:90},
  {min:2000,max:3000,price:89},
  {min:3000,max:5000,price:88},
  {min:5000,max:10000,price:87},
  {min:15000,max:50000,price:86},
  {min:50000,max:100000,price:85}
];

const products = [
  {id:"yellow", name:"–ñ—ë–ª—Ç—ã–π", type:"default", img:"yellow.jpg"},
  {id:"white", name:"–ë–µ–ª—ã–π", type:"default", img:"white.jpg"},
  {id:"cream", name:"–ö—Ä–µ–º–æ–≤—ã–π", type:"default", img:"cream.jpg"},
  {id:"pink", name:"–†–æ–∑–æ–≤—ã–π", type:"default", img:"pink.jpg"},
  {id:"red", name:"–ö—Ä–∞—Å–Ω—ã–π", type:"default", img:"red.jpg"},
  {id:"rozovo-sirenevyj", name:"–†–æ–∑–æ–≤–æ-—Å–∏—Ä–µ–Ω–µ–≤—ã–π", type:"default", img:"rozovo-sirenevyj.jpg"},
  {id:"belo-sirenevyj", name:"–ë–µ–ª–æ-—Å–∏—Ä–µ–Ω–µ–≤—ã–π", type:"default", img:"belo-sirenevyj.jpg"},
  {id:"orange", name:"–û—Ä–∞–Ω–∂–µ–≤—ã–π", type:"default", img:"orange.jpg"},
  {id:"krasno-zheltyj", name:"–ö—Ä–∞—Å–Ω–æ-–∂—ë–ª—Ç—ã–π", type:"default", img:"krasno-zheltyj.jpg"},
  {id:"krasno-belyj", name:"–ö—Ä–∞—Å–Ω–æ-–±–µ–ª—ã–π", type:"default", img:"krasno-belyj.jpg"},
  {id:"fioletovyj", name:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π", type:"default", img:"fioletovyj.jpg"},
  {id:"belo-rozovyj", name:"–ë–µ–ª–æ-—Ä–æ–∑–æ–≤—ã–π", type:"default", img:"belo-rozovyj.jpg"},
  {id:"mahrovyj-zheltyj", name:"–ú–∞—Ö—Ä–æ–≤—ã–π –∂—ë–ª—Ç—ã–π", type:"mahrovye", img:"mahrovyj-zheltyj.jpg"},
  {id:"mahrovyj-rozovyj", name:"–ú–∞—Ö—Ä–æ–≤—ã–π —Ä–æ–∑–æ–≤—ã–π", type:"mahrovye", img:"mahrovyj-rozovyj.jpg"}
];

const grid=document.getElementById("grid");
const cart={};

function renderProducts(){
  grid.innerHTML=products.map(p=>`
  <div class="card">
    <img src="${p.img}" alt="${p.name}">
    <div class="body">
      <strong>${p.name}</strong>
      <div class="meta">–¶–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</div>
      <div class="controls">
        <button onclick="changeQty('${p.id}',-20)">‚àí</button>
        <input type="number" class="qty" id="qty-${p.id}" min="0" step="20" value="${cart[p.id]?.qty||0}">
        <button onclick="changeQty('${p.id}',20)">+</button>
      </div>
      <div class="price" id="price-${p.id}">0 ‚ÇΩ</div>
      <button class="btn" onclick="addToCart('${p.id}')">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>`).join('');
}
renderProducts();

function changeQty(id,delta){
  const input=document.getElementById(`qty-${id}`);
  let val=parseInt(input.value)||0;
  val=Math.max(0,val+delta);
  input.value=val;
}

function addToCart(id){
  const input=document.getElementById(`qty-${id}`);
  const qty=parseInt(input.value)||0;
  if(!qty) return;
  cart[id]={...products.find(p=>p.id===id),qty};
  updateCart();
}

function totalQty(){
  return Object.values(cart).reduce((a,b)=>a+b.qty,0);
}

function getPrice(type,total){
  const t=(type==="mahrovye")?tiersMahrovye:tiersDefault;
  for(const tr of t){if(total>=tr.min && total<tr.max)return tr.price;}
  return t[t.length-1].price;
}

function updateCart(){
  const total=totalQty();
  let html=`<table><thead><tr><th>–°–æ—Ä—Ç</th><th>–ö–æ–ª-–≤–æ</th><th>–¶–µ–Ω–∞</th><th>–°—É–º–º–∞</th></tr></thead><tbody>`;
  let sum=0;
  Object.values(cart).forEach(p=>{
    const price=getPrice(p.type,total);
    const s=price*p.qty;
    sum+=s;
    html+=`<tr><td>${p.name}</td><td>${p.qty}</td><td>${price} ‚ÇΩ</td><td>${s.toLocaleString()} ‚ÇΩ</td></tr>`;
    document.getElementById(`price-${p.id}`).textContent=price+" ‚ÇΩ";
  });
  html+=`</tbody><tfoot><tr><td colspan="3">–ò—Ç–æ–≥–æ:</td><td>${sum.toLocaleString()} ‚ÇΩ</td></tr></tfoot></table>`;
  document.getElementById("cartTable").innerHTML=html;
}

let currentSend="";
function openForm(type){currentSend=type;document.getElementById('formOverlay').style.display='flex';}
function closeForm(){document.getElementById('formOverlay').style.display='none';}

function sendOrder(type){
  const fio=document.getElementById('fio').value.trim();
  const phone=document.getElementById('phone').value.trim();
  if(!fio||!phone){alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –§–ò–û –∏ —Ç–µ–ª–µ—Ñ–æ–Ω.");return;}
  const total=totalQty();
  let text=`–ó–∞–∫–∞–∑ —Ç—é–ª—å–ø–∞–Ω–æ–≤ —Å —Å–∞–π—Ç–∞ –¢—é–ª—å–ø–∞–Ω03.—Ä—Ñ%0A–§–ò–û: ${fio}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}%0A–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${total} —à—Ç%0A`;
  Object.values(cart).forEach(p=>{
    const price=getPrice(p.type,total);
    text+=`%0A${p.name}: ${p.qty} —à—Ç √ó ${price} ‚ÇΩ = ${(price*p.qty).toLocaleString()} ‚ÇΩ`;
  });
  const sum=Object.values(cart).reduce((a,b)=>a+getPrice(b.type,total)*b.qty,0);
  text+=`%0A%0A–ò—Ç–æ–≥–æ: ${sum.toLocaleString()} ‚ÇΩ`;
  closeForm();
  if(type==='wa')window.open(`https://wa.me/79148416115?text=${text}`,'_blank');
  else window.open(`https://t.me/share/url?url=tulpan03&text=${text}`,'_blank');
}
</script>
</body>
</html>

