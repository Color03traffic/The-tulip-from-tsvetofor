<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–∞—Ç–∞–ª–æ–≥ ‚Äî –¢—é–ª—å–ø–∞–Ω—ã –æ–ø—Ç–æ–º | –¢—é–ª—å–ø–∞–Ω03.—Ä—Ñ</title>
  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://—Ç—é–ª—å–ø–∞–Ω03.—Ä—Ñ/catalog.html">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
  <meta name="theme-color" content="#E33400">
  <style>
    :root{
      --bg:#E04297; --text:#111; --muted:#666; --brand:#E33400;
      --stroke:#e5e7eb; --radius:18px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Roboto,Inter,sans-serif;background:var(--bg);color:var(--text)}
    a{text-decoration:none;color:inherit}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--stroke);padding:12px 0;z-index:10}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .spread{display:flex;justify-content:space-between;align-items:center}
    .logo{font-weight:800;font-size:22px}
    nav a{margin-left:14px;font-weight:500}
    nav a:hover{color:var(--brand)}
    .btn{display:inline-block;padding:12px 18px;border-radius:12px;border:1px solid var(--brand);background:var(--brand);color:#fff;font-weight:600;cursor:pointer}
    .btn:hover{opacity:.92}
    main.container, .section, footer{background:#fff;border-radius:var(--radius)}
    .section{padding:32px 20px;margin-top:16px}
    .lead{color:var(--muted);margin-bottom:18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}
    .card{border:1px solid var(--stroke);border-radius:16px;overflow:hidden;background:#f9fafb}
    .card img{width:100%;height:220px;object-fit:cover}
    .card .body{padding:16px}
    .card strong{display:block;margin-bottom:4px}
    .meta{color:var(--muted);font-size:13px;margin-bottom:6px}
    .price{font-size:20px;font-weight:700;margin-top:8px;color:var(--brand)}
    .hint{font-size:12px;color:var(--muted)}
    .qty-ctrl{display:inline-flex;align-items:center;border:1px solid #ccc;border-radius:10px;overflow:hidden;margin:4px 0;background:#fff}
    .qty-ctrl button{border:0;background:#fff;font-size:18px;padding:6px 10px;cursor:pointer;line-height:1;color:var(--brand)}
    .qty-ctrl button:hover{background:#f8f8f8}
    .qty-ctrl input.qty{width:90px;text-align:center;border:0;border-left:1px solid #eee;border-right:1px solid #eee;height:34px}

    .cart{border:1px solid var(--stroke);border-radius:16px;overflow:hidden;background:#fff}
    .cart-head{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8fafc;border-bottom:1px solid var(--stroke)}
    .cart-body{padding:0}
    .cart-empty{padding:16px;color:var(--muted)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:12px 10px;border-bottom:1px solid var(--stroke);text-align:left;font-size:14px;background:#fff}
    th{font-weight:700}
    .cart-total{display:flex;justify-content:flex-end;gap:24px;padding:12px 16px;font-weight:800;background:#fff}
    .sub{color:var(--muted);font-size:12px}
    .link{color:var(--brand)}
    footer{border-top:1px solid var(--stroke);padding:16px 20px;text-align:center;color:var(--muted);font-size:14px;margin-top:16px}
    .btn-row{display:flex;gap:12px;flex-wrap:wrap;padding:12px 16px}
    .btn-wa{background:#25D366;border-color:#25D366}
    .btn-tg{background:#229ED9;border-color:#229ED9}
    .form-row{display:flex;flex-wrap:wrap;gap:10px;padding:12px 16px}
    .form-row input{flex:1 1 200px;padding:10px;border:1px solid #ccc;border-radius:8px;font-size:15px}
  </style>
</head>
<body>

<header>
  <div class="container spread">
    <div class="logo">üå∑ –¢—é–ª—å–ø–∞–Ω03</div>
    <nav>
      <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a href="#cart">–ö–æ—Ä–∑–∏–Ω–∞</a>
    </nav>
  </div>
</header>

<main class="container">

  <section id="catalog" class="section">
    <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ç—é–ª—å–ø–∞–Ω–æ–≤</h1>
    <p class="lead">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Ç–Ω–æ —É–ø–∞–∫–æ–≤–∫–µ: 20 —à—Ç. –ö–Ω–æ–ø–∫–∏ ¬± –º–µ–Ω—è—é—Ç –ø–æ 20. –ù–∞–∂–º–∏—Ç–µ ¬´–í –∫–æ—Ä–∑–∏–Ω—É¬ª, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –∑–∞–∫–∞–∑.</p>
    <div class="grid" id="grid"></div>
  </section>

  <section id="cart" class="section">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div class="cart" id="cartBox">
      <div class="cart-head">
        <div>–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞</div>
        <button id="clearCart" class="btn" style="padding:8px 12px">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
      <div class="cart-body">
        <div class="cart-empty" id="cartEmpty">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ <a class="link" href="#catalog">–∫–∞—Ç–∞–ª–æ–≥–∞</a>.</div>
        <div id="cartTableWrap" style="display:none">
          <table id="cartTable">
            <thead>
              <tr>
                <th>–¢–æ–≤–∞—Ä</th>
                <th>–¢–∏–ø</th>
                <th>–ö–æ–ª-–≤–æ</th>
                <th>–¶–µ–Ω–∞ –∑–∞ —à—Ç</th>
                <th>–°—É–º–º–∞</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="cart-total">
            <div>–ò—Ç–æ–≥–æ:</div>
            <div id="cartTotal">0 ‚ÇΩ</div>
          </div>

          <div class="form-row">
            <input id="fio" type="text" placeholder="–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ" required>
            <input id="phone" type="tel" placeholder="+7 (9XX) XXX-XX-XX" inputmode="tel" autocomplete="tel" required>
          </div>

          <div class="btn-row">
            <a id="waCheckout" class="btn btn-wa" target="_blank">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp</a>
            <a id="tgCheckout" class="btn btn-tg" target="_blank">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="contacts" class="section">
    <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
    <p>üìç –£–ª–∞–Ω-–£–¥—ç, —É–ª. –¢–æ–±–æ–ª—å—Å–∫–∞—è, 167–ê<br>
      ‚òé <a href="tel:+79148416115">+7 914 841-61-15</a><br>
      üí¨ <a href="https://t.me/tulpan03" target="_blank">Telegram</a> ¬∑
      <a href="https://wa.me/79148416115" target="_blank">WhatsApp</a></p>
  </section>

</main>

<footer>
  ¬© 2025 –¢—é–ª—å–ø–∞–Ω03.—Ä—Ñ ‚Äî —Å–≤–µ–∂–∏–µ —Ü–≤–µ—Ç—ã –æ–ø—Ç–æ–º üå∑
</footer>

<script>
const TG_USERNAME = "tulpan03";
const WA_PHONE   = "79148416115";
const PACK = 20; // —Ä–∞–∑–º–µ—Ä —É–ø–∞–∫–æ–≤–∫–∏

/* ---- –ü—Ä–∞–π—Å ---- */
const tiers = {
  default: [
    {min:20, max:500, price:99},{min:500, max:1000, price:88},{min:1000, max:2000, price:80},
    {min:2000, max:3000, price:79},{min:3000, max:5000, price:78},{min:5000, max:10000, price:77},
    {min:15000, max:50000, price:76},{min:50000, max:100000, price:75}
  ],
  mahrovye: [
    {min:20, max:500, price:109},{min:500, max:1000, price:98},{min:1000, max:2000, price:90},
    {min:2000, max:3000, price:89},{min:3000, max:5000, price:88},{min:5000, max:10000, price:87},
    {min:15000, max:50000, price:86},{min:50000, max:100000, price:85}
  ],
  mix: [
    {min:20, max:500, price:99},{min:500, max:1000, price:88},{min:1000, max:2000, price:80},
    {min:2000, max:3000, price:79},{min:3000, max:5000, price:78},{min:5000, max:10000, price:77},
    {min:15000, max:50000, price:76},{min:50000, max:100000, price:75}
  ]
};

/* ---- –ö–∞—Ç–∞–ª–æ–≥ ---- */
const products = [
  {id:"tul-red", name:"–¢—é–ª—å–ø–∞–Ω –∫—Ä–∞—Å–Ω—ã–π", type:"default", img:"red.jpg"},
  {id:"tul-white", name:"–¢—é–ª—å–ø–∞–Ω –±–µ–ª—ã–π", type:"default", img:"white.jpg"},
  {id:"tul-yellow", name:"–¢—é–ª—å–ø–∞–Ω –∂—ë–ª—Ç—ã–π", type:"default", img:"yellow.jpg"},
  {id:"tul-pink", name:"–¢—é–ª—å–ø–∞–Ω —Ä–æ–∑–æ–≤—ã–π", type:"default", img:"pink.jpg"},
  {id:"tul-cream", name:"–¢—é–ª—å–ø–∞–Ω –∫—Ä–µ–º–æ–≤—ã–π", type:"default", img:"cream.jpg"},
  {id:"tul-orange", name:"–¢—é–ª—å–ø–∞–Ω –æ—Ä–∞–Ω–∂–µ–≤—ã–π", type:"default", img:"orange.jpg"},
  {id:"tul-peach", name:"–¢—é–ª—å–ø–∞–Ω –ø–µ—Ä—Å–∏–∫–æ–≤—ã–π", type:"default", img:"peach.jpg"},
  {id:"tul-lilac", name:"–¢—é–ª—å–ø–∞–Ω –ª–∏–ª–æ–≤—ã–π", type:"default", img:"lilac.jpg"},
  {id:"tul-purple", name:"–¢—é–ª—å–ø–∞–Ω —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π", type:"default", img:"purple.jpg"},
  {id:"tul-burgundy", name:"–¢—é–ª—å–ø–∞–Ω –±–æ—Ä–¥–æ–≤—ã–π", type:"default", img:"burgundy.jpg"},
  {id:"tul-coral", name:"–¢—é–ª—å–ø–∞–Ω –∫–æ—Ä–∞–ª–ª–æ–≤—ã–π", type:"default", img:"coral.jpg"},
  {id:"tul-bicolor", name:"–¢—é–ª—å–ø–∞–Ω –¥–≤—É—Ö—Ü–≤–µ—Ç–Ω—ã–π", type:"default", img:"bicolor.jpg"},
  {id:"tul-mahrovyj", name:"–¢—é–ª—å–ø–∞–Ω –º–∞—Ö—Ä–æ–≤—ã–π", type:"mahrovye", img:"mahrovyj.jpg"},
  {id:"tul-mix", name:"–¢—é–ª—å–ø–∞–Ω –º–∏–∫—Å", type:"mix", img:"mix.jpg"}
];

const grid = document.getElementById('grid');
grid.innerHTML = products.map(p => `
  <div class="card">
    <img src="${p.img}" alt="${p.name}">
    <div class="body">
      <strong>${p.name}</strong>
      <div class="meta">–¶–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</div>
      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (—à—Ç, –∫—Ä–∞—Ç–Ω–æ ${PACK}):</label>
      <div class="qty-ctrl">
        <button data-act="dec" data-id="${p.id}">‚àí</button>
        <input type="number" min="${PACK}" step="${PACK}" value="${PACK}" class="qty" data-type="${p.type}" data-id="${p.id}">
        <button data-act="inc" data-id="${p.id}">+</button>
      </div>
      <div class="price" data-price-for="${p.id}">99 ‚ÇΩ</div>
      <div class="sub">1 —É–ø. = ${PACK} —à—Ç</div>
      <div class="hint">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–∫—Ä–∞—Ç–Ω–æ ${PACK}) –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–í –∫–æ—Ä–∑–∏–Ω—É¬ª</div>
      <div style="margin-top:10px">
        <button class="btn add" data-id="${p.id}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
      </div>
    </div>
  </div>
`).join('');

/* ---- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ ---- */
function roundToPacks(q){ if(!q) return PACK; q = Math.max(PACK, parseInt(q)||PACK); return Math.ceil(q / PACK)*PACK; }
function getPrice(type, qty){
  const set = tiers[type] || tiers.default;
  for(const t of set){ if(qty >= t.min && qty < t.max) return t.price; }
  return set[set.length-1].price;
}

/* ---- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –ø—Ä–∏ –≤–≤–æ–¥–µ ---- */
document.addEventListener('input', (e)=>{
  const inp = e.target.closest('input.qty');
  if(!inp) return;
  // –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–∫—Ä—É–≥–ª—è–µ–º –∫ –∫—Ä–∞—Ç–Ω–æ—Å—Ç–∏ 20 –Ω–∞ –ª–µ—Ç—É
  inp.value = roundToPacks(inp.value);
  const priceEl = document.querySelector(`.price[data-price-for="${inp.dataset.id}"]`);
  const price = getPrice(inp.dataset.type, parseInt(inp.value));
  priceEl.textContent = price + ' ‚ÇΩ';
});

/* ---- –ö–Ω–æ–ø–∫–∏ ¬± –ø–æ 20 ---- */
document.addEventListener('click', (e)=>{
  const btn = e.target.closest('button[data-act]');
  if(!btn) return;
  const id = btn.dataset.id;
  const input = document.querySelector(`input.qty[data-id="${id}"]`);
  let value = roundToPacks(input.value);
  if(btn.dataset.act==="inc") value += PACK;
  if(btn.dataset.act==="dec") value = Math.max(PACK, value - PACK);
  input.value = value;
  const priceEl = document.querySelector(`.price[data-price-for="${id}"]`);
  const price = getPrice(input.dataset.type, value);
  priceEl.textContent = price + ' ‚ÇΩ';
});

/* ---- –ö–æ—Ä–∑–∏–Ω–∞ ---- */
const cart = new Map();

function renderCart(){
  const empty = document.getElementById('cartEmpty');
  const wrap = document.getElementById('cartTableWrap');
  const tbody = document.querySelector('#cartTable tbody');
  const totalEl = document.getElementById('cartTotal');
  if(cart.size===0){ empty.style.display='block'; wrap.style.display='none'; return; }
  empty.style.display='none'; wrap.style.display='block'; tbody.innerHTML=''; let total=0;

  cart.forEach(item=>{
    const unit = getPrice(item.type,item.qty);
    const sum  = unit * item.qty;
    total += sum;
    const packs = item.qty / PACK;
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td>${item.name}<div class="sub">–£–ø–∞–∫–æ–≤–æ–∫: ${packs}</div></td>
      <td>${item.type==='mahrovye'?'–ú–∞—Ö—Ä–æ–≤—ã–µ':(item.type==='mix'?'–ú–∏–∫—Å':'–û—Å—Ç–∞–ª—å–Ω—ã–µ')}</td>
      <td>${item.qty} —à—Ç<div class="sub">(${packs}√ó${PACK})</div></td>
      <td>${unit} ‚ÇΩ</td>
      <td>${sum.toLocaleString('ru-RU')} ‚ÇΩ</td>
      <td><a href="#" class="link" data-act="del" data-id="${item.id}">–£–¥–∞–ª–∏—Ç—å</a></td>`;
    tbody.appendChild(tr);
  });

  totalEl.textContent = total.toLocaleString('ru-RU') + ' ‚ÇΩ';
}

/* ---- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É: –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö –∫ 20 ---- */
document.addEventListener('click', (e)=>{
  const add = e.target.closest('.add');
  if(!add) return;
  const id = add.dataset.id; const p = products.find(x=>x.id===id);
  const input = document.querySelector(`.qty[data-id="${id}"]`);
  let qty = roundToPacks(input.value);
  input.value = qty; // –≤–∏–∑—É–∞–ª—å–Ω–æ —Ç–æ–∂–µ –≤—ã—Ä–æ–≤–Ω—è–µ–º
  const prev = cart.get(id) || {id, name:p.name, type:p.type, qty:0};
  prev.qty += qty; // –ø—Ä–∏–±–∞–≤–ª—è–µ–º –∫—Ä–∞—Ç–Ω–æ 20
  cart.set(id, prev);
  renderCart();
  location.hash = '#cart';
});

/* ---- –£–¥–∞–ª–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ ---- */
document.getElementById('cartBox').addEventListener('click',(e)=>{
  const del = e.target.closest('[data-act="del"]');
  if(del){ e.preventDefault(); cart.delete(del.dataset.id); renderCart(); }
});
document.getElementById('clearCart').addEventListener('click',()=>{cart.clear();renderCart();});

/* ---- –§–ò–û/–¢–µ–ª–µ—Ñ–æ–Ω: –º–∞—Å–∫–∞ + –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ---- */
const fioInput = document.getElementById('fio');
const phoneInput = document.getElementById('phone');

function formatPhone(value){
  let d = value.replace(/\D/g,'');
  if(d.startsWith('8')) d = '7' + d.slice(1);
  if(!d.startsWith('7')) d = '7' + d;
  d = d.slice(0,11);
  let res = '+7';
  if(d.length>1) res += ' (' + d.slice(1,4);
  if(d.length>=4) res += ') ' + d.slice(4,7);
  if(d.length>=7) res += '-' + d.slice(7,9);
  if(d.length>=9) res += '-' + d.slice(9,11);
  return res;
}
function saveField(k,v){try{localStorage.setItem(k,v);}catch(e){}}
function loadField(k){try{return localStorage.getItem(k)||'';}catch(e){return'';}}

phoneInput.addEventListener('input', ()=>{
  phoneInput.value = formatPhone(phoneInput.value);
  saveField('t03_phone', phoneInput.value);
  phoneInput.setSelectionRange(phoneInput.value.length, phoneInput.value.length);
});
fioInput.addEventListener('input', ()=> saveField('t03_fio', fioInput.value) );

(function preload(){
  const savedFio = loadField('t03_fio');
  const savedPhone = loadField('t03_phone');
  if(savedFio) fioInput.value = savedFio;
  if(savedPhone) phoneInput.value = savedPhone;
})();

/* ---- –°–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ ---- */
function buildMessage(){
  const fio = fioInput.value.trim();
  const digits = phoneInput.value.replace(/\D/g,'');
  if(!fio){ alert('–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ'); return null; }
  if(digits.length!==11 || !(digits.startsWith('7') || digits.startsWith('8'))){
    alert('–¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º: +7 (9XX) XXX-XX-XX');
    return null;
  }
  const lines=[];
  let totalPacks = 0;
  cart.forEach(i=>{
    const price=getPrice(i.type,i.qty);
    const packs=i.qty/ PACK; totalPacks+=packs;
    lines.push(`${i.name}: ${i.qty} —à—Ç (${packs} —É–ø. √ó ${PACK}) √ó ${price} ‚ÇΩ = ${(i.qty*price).toLocaleString('ru-RU')} ‚ÇΩ`);
  });
  const total=document.getElementById('cartTotal').textContent;
  const norm = (digits.startsWith('8') ? '7'+digits.slice(1) : digits);
  const pretty = formatPhone('+'+norm);

  return (
    `–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å —Ç—é–ª—å–ø–∞–Ω03.—Ä—Ñ%0A%0A` +
    lines.join('%0A') +
    `%0A%0A–ò—Ç–æ–≥–æ: ${total}%0A–í—Å–µ–≥–æ —É–ø–∞–∫–æ–≤–æ–∫: ${totalPacks}%0A%0A–§–ò–û: ${encodeURIComponent(fio)}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${encodeURIComponent(pretty)}`
  );
}

/* ---- –ö–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ ---- */
document.getElementById('waCheckout').addEventListener('click',(e)=>{
  const msg=buildMessage(); if(!msg){e.preventDefault();return;}
  e.target.href=`https://wa.me/${WA_PHONE}?text=${msg}`;
});
document.getElementById('tgCheckout').addEventListener('click',(e)=>{
  const msg=buildMessage(); if(!msg){e.preventDefault();return;}
  e.target.href=`https://t.me/${TG_USERNAME}?text=${msg}`;
});

/* ---- –°—Ç–∞—Ä—Ç ---- */
renderCart();
</script>

</body>
</html>
